---
format: 
  revealjs:
    theme: scss/custom-dark.scss
    logo: images/FWS-logo.png
    footer: "[Alaska Data Week 2024](https://doimspp.sharepoint.com/sites/fws-FF07S00000-data/SitePages/Alaska-Data-Week-2024.aspx){.author}"
    mermaid: 
      theme: neutral
editor: source
highlight-style: tango
---

```{r setup}
#| echo: false

knitr::opts_chunk$set(warning = FALSE, 
                      message = FALSE, 
                      fig.retina = 3, 
                      fig.align = "center")
library(emojifont)
```


# A Reproducible Data Workflow {.smaller}

<br><br>

::: columns
::: {.column width="33%"}
[**McCrea Cobb**]{.author}

::: smaller
Refuge Inventory and Monitoring  
{{< fa envelope title="Email address logo" >}} [mccrea_cobb\@fws.gov](mailto:mccrea_cobb@fws.gov)  
{{< fa brands github title="The GitHub octocat logo" >}} [mccrea-cobb](https://github.com/mccrea-cobb)
:::
:::

::: {.column width="34%"}
[**Emma Schillerstrom**]{.author}

::: smaller
Refuge Inventory and Monitoring  
{{< fa envelope title="Email address logo" >}} [emma_shillerstrom\@fws.gov](mailto:emma_schillerstrom@fws.gov)  
{{< fa brands github title="The GitHub octocat logo" >}} [eschillerstrom-usfws](https://github.com/eschillerstrom-usfws)
:::
:::

::: {.column width="33%"}
[**Jonah Withers**]{.author}

::: smaller
Fisheries and Ecological Services  
{{< fa envelope title="Email address logo" >}} [jonah_withers\@fws.gov](mailto:jonah_withers@fws.gov)  
{{< fa brands github title="The GitHub octocat logo" >}} [JonahWithers-USFWS](https://github.com/JonahWithers-USFWS)
:::
:::
:::

<br><br>

::: {.center .smaller"}
{{< fa brands github title="The GitHub octocat logo" >}} <https://github.com/USFWS/data-workflow-presentation>
:::

::: notes

:::

## Scripted Data Workflow

<br><br><br>

::: {.center height="80%"}
```{mermaid}
%%| fig-height: 100

%%{ init: {
    'themeVariables':
        { 'fontSize': '30px'}
} }%%

flowchart LR
  A(Import) --> B(Tidy)
  B --> C(Transform)
  C --> D(Visualize)
  D --> E(Analyze)
  E --> F(Communicate)
  F --> G(Preserve)
  G --> A
  
style A fill:#FFFF00,stroke:#333,stroke-width:4px
```
:::

## Witch Occupancy at Tetlin NWR

![](images/witch_tetlin.png){.shadow width="80%" fig-align="center" fig-alt="An image of a witch flying over mountains."}


##

![](images/witch_hiding.png){.shadow width="80%" fig-align="center" fig-alt="An image of a witch hiding in the forest."}





## Visualize and summarize results

<br>

::: columns

::: {.column width="50%"}

**Manual Workflow**

::: incremental  
- Move data into Excel
- Create summary tables and plots
- Cut/paste into Word doc
- Reformat to match document
:::
:::

::: {.column width="50%"}  

**Scripted Workflow**

::: incremental
- some text
:::

:::

:::


::: notes
-   Tons of options, R packages
-   Static versus dynamic visualizations
-   Depends on output file type (html vs. Word)
:::


## R Workflow

::: columns


:::

::: notes

:::


## Visualize and summarize results

```{r}
#| echo: false
#| message: false
#| cache: true

# create_map function
source("./R/create_map.R")

# Data
tetlin <- sf::st_read("data/shapefile/tetlin.shp", quiet = TRUE)
sites <- read.csv("data/csv/sites.csv")
psi <- terra::rast("data/raster/psi/psi.tif")

create_map(ras = psi, s= sites, r = tetlin, hgt = 650)

```


## Report results

::: columns
::: {.column width="40%"}  

`r emoji('raising_hand')` Goals

::: incremental  
- Easy to update
- Clear link between the data and the report
- Reproducible
:::

:::
:::

::: notes
- R can output to many formats
- Mention the Alaska Refuge reporting series Quarto and Rmarkdown templates
:::

## Our Witch Occurrance Report


::: notes

:::


## Share products



::: notes
-   You can share your products through scripts
    -   Examples
        -   Emailing
        -   Publish report or app to server (Posit Connect)
        -   Save to data repository, share link
:::


## Preserve it all



::: notes
-   You can preserve your products using scripts
:::


## Demonstrate reuse



::: notes
-   You can replicate these steps if it is all scripted
-   Documentation is important!
:::


## Where to go from here



::: notes
-   NCTC trainings
-   Resources available
-   Who to reach out to
:::

##

![](images/witch_moose.png){.shadow width="80%" fig-align="center" fig-alt="An image of a witch riding a moose in the forest."}

